# 有关开发文档

## 角色

**一切角色基于由学号注册的id,至于分权是数据库的属性的作用**

* 管理员
  * 用于管理财务
  * 可以添加会员的购买请求
  * 管理员可以修改所有已添加的购买请求的状态（GET all）
  * 统计各套餐的购买情况(GET ALL在进行求和)
  * 可以修改已交的金额数，但是不能改变应交金额
    （应交金额自动计算）
  * 管理员可以筛选已核销，未核销的用户（GET所有订单，GET所有用户，筛选出每个订单的未付款用户）
* 核销官（核销：告诉系统你有哪一笔订单的收费已经收到了）
  * 由管理员批准部长成为核销官（管理员改变部长的属性）
  * 内置核销员是管理员
  * 核销员用于判断这一订单内，所有普通用户是否已经缴费成功，如果已经缴费成功，点击更改核销状态。
    * 核销判断的方式是通过搜索学号，的购买记录，判断是否已经全部付款
    * 核销时可以写备注
* 部长
  * 可以添加会员的购买请求
  * 可以修改自己添加的购买请求的状态（发送自己的id到数据库，作为提交人）
  * 部长可以查看自己应交的金额数和已交的金额数（调取数据库）
* 游客（没有屌用）
  * 可以查看自己的应交金额（普通用户登录后，可以查看自己的应交金额，通过get方法）

## 数据库

* 用户表
  * 用户id（会员编号）
  * 用户电话
  * 用户学号（username）
  * 用户密码（psw）
  * 用户属性：权限
* 物品表:
  * 物品id
  * 物品名字
  * 物品备注
  * 物品单价
  * 物品图片
* 订单表：
  * 订单id
  * 用户id（下单的用户是谁）
  * 设置订单的部长的id
  * 下单购买的物品的id
  * 下单购买的物品的数量
  * 应交金额
  * 已交金额
  * 是否已经核销（属性）（由核销员确定这个人是否已经付完全款）
  * 购买状态（谁已经付款，谁没付款）
  * 备注
* 用户申请表
  * 申请id
  * 申请人id
  * 批准人id1
  * 批准人id2
  * 批准状态

## 接口API的编写

`baseURL:http://localhost:3000`

### 登录

**方法**

post

**地址**

baseURL + /login

**参数**

username:账号（string）

password:密码（string）

***

### **注册**

**方法**

post

**地址**

http://www.rushmc.top/api/register

**参数**

username：账号（字符串）

password：密码（字符串）

name：姓名（字符串）

phone：电话号码（字符串）

***

